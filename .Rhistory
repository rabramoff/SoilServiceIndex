plot(SOCindex)
head(npf)
View(npf)
summary(npf$Nmin_g_m2_yr_O_mean)
summary(npf$Nmin_g_m2_yr_A_mean)
summary(npf$Nmin_g_m2_yr_OA_mean)
str(npf)
str(npf$Nmin_g_m2_yr_O_mean)
as.numeric(npf$Nmin_g_m2_yr_O_mean)
as.numeric(as.character(npf$Nmin_g_m2_yr_O_mean))
npf$Nmin_g_m2_yr_O_mean
summary(as.numeric(as.chacater(npf$Nmin_g_m2_yr_O_mean)))
summary(as.numeric(as.character(npf$Nmin_g_m2_yr_A_mean)))
summary(as.numeric(as.character(npf$Nmin_g_m2_yr_OA_mean)))
summary(as.numeric(as.charcater(npf$Nmin_g_m2_yr_O_mean)))
summary(as.numeric(as.character(npf$Nmin_g_m2_yr_O_mean)))
pf <- read.csv("/Users/rzabramoff/Dropbox (Climate)/External Collaborations/ISCN/Allison/HedleyP_database.csv")
nf <- read.csv("/Users/rzabramoff/Dropbox (Climate)/External Collaborations/ISCN/Allison/Nmin_data_UpdateForRose_20170922.csv")
pf <- read.csv("/Users/rzabramoff/Dropbox (Climate)/External Collaborations/ISCN/Allison/HedleyP_database.csv")
range01 <- function(x){(x-min(x))/(max(x)-min(x))}
head(pf)
str(pf)
summary(pf$Total.P)
hist(as.numeric(as.character(nf$Nmin_g_m2_yr_OA_mean)), xlim = c(0,100), breaks=100, xlab=expression("SOC (gC/kg)"))
hist(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)), xlim = c(0,100), breaks=100, xlab=expression("SOC (gC/kg)"))
hist(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)), xlim = c(0,100), breaks=100, xlab=expression("Nmin (g/m2 O horizon)"))
hist(as.numeric(as.character(pf$Total.P)), xlim = c(0,100), breaks=100, xlab=expression("Total P (mg/kg)"))
hist(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)), xlim = c(0,100), breaks=100, xlab=expression("Nmin (g/m2 O horizon)"))
hist(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)), xlim = c(0,500), breaks=100, xlab=expression("Nmin (g/m2 O horizon)"))
hist(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)), xlim = c(0,100), breaks=100, xlab=expression("Nmin (g/m2 O horizon)"))
hist(as.numeric(as.character(pf$Total.P)), xlim = c(0,500), breaks=100, xlab=expression("Total P (mg/kg)"))
hist(as.numeric(as.character(pf$Total.P)), xlim = c(0,1000), breaks=100, xlab=expression("Total P (mg/kg)"))
hist(as.numeric(as.character(pf$Total.P)), xlim = c(0,2000), breaks=100, xlab=expression("Total P (mg/kg)"))
hist(as.numeric(as.character(pf$Total.P)), xlim = c(0,5000), breaks=100, xlab=expression("Total P (mg/kg)"))
hist(as.numeric(as.character(pf$Total.P)), xlim = c(0,2000), breaks=100, xlab=expression("Total P (mg/kg)"))
hist(lay$orgc_value_avg*lay$bdws_value_avg,  xlim = c(0,100), breaks=100, xlab=expression("SOC (gC/dm3)"), main="Soil Organic Carbon") #same as kg/m3
ggplot(nf, aes(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)))) +
geom_density()
geom_density()
ggplot(pf, aes(pf$Total.P)) +
geom_density()
head(nf)
ggplot(nf, aes(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)), fill=Land.Use.Description)) +
stat_density(position="stack")
nf <- read.csv("/Users/rzabramoff/Dropbox (Climate)/External Collaborations/ISCN/Allison/Nmin_data_UpdateForRose_20170922.csv")
pf <- read.csv("/Users/rzabramoff/Dropbox (Climate)/External Collaborations/ISCN/Allison/HedleyP_database.csv")
ggplot(nf, aes(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)), fill=Land.Use.Description)) +
ggplot(nf, aes(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)), fill=LandUseType)) +
stat_density(position="stack")
ggplot(nf, aes(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)), fill=LandUseType)) +
stat_density(position="stack")
str(nf$LandUseType)
unique(nf$LandUseType)
ggplot(nf, aes(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)), fill=LandUseType)) +
stat_density(position="stack")
head(nf)
nf$NminNum <- as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean))
ggplot(nf, aes(NminNum, fill=LandUseType)) +
stat_density(position="stack")
head(nf)
summary(nf$NminNum)
View(nf)
ggplot(nf, aes(as.numeric(as.character(nf$Nmin_g_m2_yr_OA_mean)))) +
geom_density()
ggplot(pf, aes(pf$Total.P)) +
geom_density()
nf$NminNum <- as.numeric(as.character(nf$Nmin_g_m2_yr_OA_mean))
ggplot(nf, aes(NminNum, fill=LandUseType)) +
stat_density(position="stack")
ggplot(nf, aes(NminNum, fill=LandUseType)) +
stat_density(position="stack") +
ylim(0,100)
nf$NminNum <- as.numeric(as.character(nf$Nmin_g_m2_yr_OA_mean))
ggplot(nf, aes(NminNum, fill=LandUseType)) +
stat_density(position="stack") +
xlim(0,100)
xlim(-10,60)
ggplot(nf, aes(NminNum, fill=LandUseType)) +
stat_density(position="stack") +
xlim(-10,60)
ggplot(nf, aes(NminNum, fill=LandUseType)) +
stat_density(position="stack") +
xlim(-10,60) +
xlab("N mineralization (g/m2/y)")
xlab("N mineralization (g/m2/y) - OA horizon")
nf$NminNum <- as.numeric(as.character(nf$Nmin_g_m2_yr_OA_mean))
ggplot(nf, aes(NminNum, fill=LandUseType)) +
stat_density(position="stack") +
xlim(-10,60) +
hist(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)), xlim = c(0,100), breaks=100, xlab=expression("Nmin (g/m2/y O horizon)"))
hist(as.numeric(as.character(pf$Total.P)), xlim = c(0,2000), breaks=100, xlab=expression("Total P (mg/kg)"))
require(ggplot2)
ggplot(nf, aes(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)))) +
geom_density()
ggplot(pf, aes(pf$Total.P)) +
geom_density()
nf$NminNum <- as.numeric(as.character(nf$Nmin_g_m2_yr_OA_mean))
ggplot(nf, aes(NminNum, fill=LandUseType)) +
stat_density(position="stack") +
xlim(-10,60) +
xlab("N mineralization (g/m2/y) - OA horizon")
SOCindex <- range01(lay$orgc_value_avg*lay$bdws_value_avg)
plot(SOCindex)
SOCindex
lay$orgc_value_avg*lay$bdws_value_avg
summary(lay$orgc_value_avg)
hist(lay$bdws_value_avg) #bulk density of whole soil kg/dm3
lay$orgc_value_avg*lay$bdws_value_avg
str(lay) lay$orgc_value_avg*lay$bdws_value_avg
str(lay)
summary(lay$orgc_value_avg*lay$bdws_value_avg)
SOCnums <- lay$orgc_value_avg*lay$bdws_value_avg
SOCnums <- SOCnums[!is.na(SOCnums)]
SOCnums
SOCindex <- range01(SOCnums)
plot(SOCindex)
rangeSOC <- function(x){(x-min(SOCnums))/(max(SOCnums)-min(SOCnums))}
SOCindex <- range01(SOCnums)
plot(SOCindex)
rangeSOC(10)
rangeSOC(100)
rangeSOC(1000000)
max(SOCnums)
rangeSOC(1000)
Nindex <- range01(nf$NminNum)
plot(Nindex)
Nindex
nf$NminNum
Nnums <- NminNum[!is.na(Nnums)]
Nnums <- nf$NminNum[!is.na(nf$NminNum)]
Nindex <- range01(Nnums)
plot(Nindex)
plot(Nnums)
Nnums <- Nnums[Nnums > 400 | Nums < -200]
Nnums <- nf$NminNum[!is.na(nf$NminNum) & Nnums > 400 | Nums < -200]
Nnums <- nf$NminNum[!is.na(nf$NminNum) & Nnums > 400 | Nnums < -200]
Nnums <- Nnums[Nnums > 400 | Nnums < -200]
Nindex <- range01(Nnums)
plot(SOCindex)
plot(Nindex)
Nindex <- range01(Nnums)
plot(Nindex)
Nindex
Nnums
Nnums <- nf$NminNum[!is.na(nf$NminNum)]
Nnums
Nnums <- Nnums[Nnums > 400 | Nnums < -200]
Nnums
Nnums <- nf$NminNum[!is.na(nf$NminNum)]
Nnums <- Nnums[Nnums < 400 | Nnums > -200]
Nnums
Nnums <- Nnums[Nnums < 400 & Nnums > -200]
Nnums
Nindex <- range01(Nnums)
plot(Nindex)
pf$Total.P
TotP <- pf$Total.P
Pindex <- range01(TotP)
plot(Pindex)
SOCindex
Nnums
TotP
EnterYourTotPValue <- 1000
W.Index <- function(s,n,p,ws,wn,wp){
range01 <- function(x){(x-min(x))/(max(x)-min(x))}
SOCindex <- range01(SOCnums)
Nindex <- range01(Nnums)
Pindex <- range01(TotP)
windex <- (SOCindex*ws + Nindex*wn + Pindex*wp)/3
return(windex)
}
W.Index(EnterYourSOCValue,EnterYourNminValue,EnterYourTotPValue,SOCWeight,NminWeight,TotPWeight)
EnterYourSOCValue <- 1000 #in gC/dm3 - same as kg/m3
EnterYourNminValue <- 30 #in g/m2/yr for OA horizons
EnterYourTotPValue <- 1000 #in mg P/kg
SOCWeight <- 1
NminWeight <- 1
TotPWeight <- 1
W.Index <- function(s,n,p,ws,wn,wp){
range01 <- function(x){(x-min(x))/(max(x)-min(x))}
SOCindex <- range01(SOCnums)
Nindex <- range01(Nnums)
Pindex <- range01(TotP)
windex <- (SOCindex*ws + Nindex*wn + Pindex*wp)/3
return(windex)
}
W.Index(EnterYourSOCValue,EnterYourNminValue,EnterYourTotPValue,SOCWeight,NminWeight,TotPWeight)
SOCindex <- rangeSOC(EnterYourSOCValue)
rangeSOC <- function(x){(x-min(SOCnums))/(max(SOCnums)-min(SOCnums))}
rangeNmin <- function(x){(x-min(Nnums))/(max(Nnums)-min(Nnums))}
rangeTotP <- function(x){(x-min(TotP))/(max(TotP)-min(TotP))}
EnterYourSOCValue <- 1000 #in gC/dm3 - same as kg/m3
EnterYourNminValue <- 30 #in g/m2/yr for OA horizons
EnterYourTotPValue <- 1000 #in mg P/kg
SOCWeight <- 1
NminWeight <- 1
TotPWeight <- 1
W.Index <- function(s,n,p,ws,wn,wp){
SOCindex <- rangeSOC(EnterYourSOCValue)
Nindex <- range01(Nnums)
W.Index <- function(s,n,p,ws,wn,wp){
SOCindex <- rangeSOC(EnterYourSOCValue)
Nindex <- rangeNmin(EnterYourNminValue)
Pindex <- rangeTotP(EnterYourTotPValue)
windex <- (SOCindex*ws + Nindex*wn + Pindex*wp)/3
return(windex)
}
W.Index(EnterYourSOCValue,EnterYourNminValue,EnterYourTotPValue,SOCWeight,NminWeight,TotPWeight)
))S))|}}}
W.Index <- function(s,n,p,ws,wn,wp){
SOCindex <- rangeSOC(EnterYourSOCValue)
Nindex <- rangeNmin(EnterYourNminValue)
Pindex <- rangeTotP(EnterYourTotPValue)
windex <- (SOCindex*ws + Nindex*wn + Pindex*wp)/3
return(windex)
}
W.Index(EnterYourSOCValue,EnterYourNminValue,EnterYourTotPValue,SOCWeight,NminWeight,TotPWeight)
EnterYourTotPValue <- 10 #in mg P/kg
SOCWeight <- 1
NminWeight <- 1
TotPWeight <- 1
W.Index <- function(s,n,p,ws,wn,wp){
SOCindex <- rangeSOC(EnterYourSOCValue)
Nindex <- rangeNmin(EnterYourNminValue)
Pindex <- rangeTotP(EnterYourTotPValue)
windex <- (SOCindex*ws + Nindex*wn + Pindex*wp)/3
return(windex)
}
W.Index(EnterYourSOCValue,EnterYourNminValue,EnterYourTotPValue,SOCWeight,NminWeight,TotPWeight)
TotPWeight <- 0.3
W.Index <- function(s,n,p,ws,wn,wp){
SOCindex <- rangeSOC(EnterYourSOCValue)
Nindex <- rangeNmin(EnterYourNminValue)
Pindex <- rangeTotP(EnterYourTotPValue)
windex <- (SOCindex*ws + Nindex*wn + Pindex*wp)/3
return(windex)
}
W.Index(EnterYourSOCValue,EnterYourNminValue,EnterYourTotPValue,SOCWeight,NminWeight,TotPWeight)
NminWeight <- 0.5
TotPWeight <- 0.5
W.Index(EnterYourSOCValue,EnterYourNminValue,EnterYourTotPValue,SOCWeight,NminWeight,TotPWeight)
View(npf)
df <- read.table("/Users/rzabramoff/Dropbox (Climate)/External Collaborations/ISCN/WoSIS_2016_July/wosis_201607_profiles.txt", sep="\t", header=T)
att <- read.table("/Users/rzabramoff/Dropbox (Climate)/External Collaborations/ISCN/WoSIS_2016_July/wosis_201607_attributes.txt", sep="\t", header=T)
lay <- read.table("/Users/rzabramoff/Dropbox (Climate)/External Collaborations/ISCN/WoSIS_2016_July/wosis_201607_layers.txt", sep="\t", header=T, fill=T)
nf <- read.csv("/Users/rzabramoff/Dropbox (Climate)/External Collaborations/ISCN/Allison/Nmin_data_UpdateForRose_20170922.csv")
pf <- read.csv("/Users/rzabramoff/Dropbox (Climate)/External Collaborations/ISCN/Allison/HedleyP_database.csv")
head(lay)
summary(lay$orgc_value_avg)
hist(lay$orgc_value_avg, xlim = c(0,100), breaks=100, xlab=expression("SOC (gC/kg)"))
hist(lay$bdws_value_avg) #bulk density of whole soil kg/dm3
hist(lay$orgc_value_avg*lay$bdws_value_avg,  xlim = c(0,100), breaks=100, xlab=expression("SOC (gC/dm3)"), main="Soil Organic Carbon") #same as kg/m3
summary(lay$orgc_value_avg*lay$bdws_value_avg)
#possible index by quartiles: 0-2.6 low, 2.6-6 med, 6-14.9 good, 14.9-1250 high
#no land use type, but location and soil type
summary(df$cfao_soil_unit) #fao
summary(df$cfao_major_group)
summary(df$cstx_great_group) #soil tax
summary(df$cwrb_reference_soil_group) #world reference base
summary(df$cwrb_prefix_qualifier)
summary(df$cwrb_suffix_qualifier)
require(ggplot2)
lay$soc_estimate <- lay$orgc_value_avg*lay$bdws_value_avg
ggplot(lay, aes(soc_estimate)) +
geom_density()
#takes a while:
#ggplot(lay, aes(soc_estimate, fill=orgc_profile_code)) +
#  stat_density(position="stack")
SOCnums <- lay$orgc_value_avg*lay$bdws_value_avg
SOCnums <- SOCnums[!is.na(SOCnums)] #remove NAs
Nnums <- nf$NminNum[!is.na(nf$NminNum)] #remove NAs
Nnums <- Nnums[Nnums < 400 & Nnums > -200] #remove 2 outliers
TotP <- pf$Total.P
range01 <- function(x){(x-min(x))/(max(x)-min(x))}
rangeSOC <- function(x){(x-min(SOCnums))/(max(SOCnums)-min(SOCnums))}
rangeNmin <- function(x){(x-min(Nnums))/(max(Nnums)-min(Nnums))}
rangeTotP <- function(x){(x-min(TotP))/(max(TotP)-min(TotP))}
#SOCindex <- range01(SOCnums)
#Nindex <- range01(Nnums)
#Pindex <- range01(TotP)
#plot(SOCindex)
#plot(Nindex)
#plot(Pindex)
W.Index <- function(s,n,p,ws,wn,wp){
SOCindex <- rangeSOC(EnterYourSOCValue)
Nindex <- rangeNmin(EnterYourNminValue)
Pindex <- rangeTotP(EnterYourTotPValue)
windex <- (SOCindex*ws + Nindex*wn + Pindex*wp)/3
return(windex)
}
EnterYourSOCValue <- 1000 #in gC/dm3 - same as kg/m3
EnterYourNminValue <- 30 #in g/m2/yr for OA horizons
EnterYourTotPValue <- 10 #in mg P/kg
SOCWeight <- 1
NminWeight <- 0.5
TotPWeight <- 0.5
W.Index(EnterYourSOCValue,EnterYourNminValue,EnterYourTotPValue,SOCWeight,NminWeight,TotPWeight)
plot(SOCindex)
SOCnums
Nnums
TotP
nf$NminNum <- as.numeric(as.character(nf$Nmin_g_m2_yr_OA_mean))
SOCnums <- lay$orgc_value_avg*lay$bdws_value_avg
SOCnums <- SOCnums[!is.na(SOCnums)] #remove NAs
Nnums <- nf$NminNum[!is.na(nf$NminNum)] #remove NAs
Nnums <- Nnums[Nnums < 400 & Nnums > -200] #remove 2 outliers
TotP <- pf$Total.P
range01 <- function(x){(x-min(x))/(max(x)-min(x))}
rangeSOC <- function(x){(x-min(SOCnums))/(max(SOCnums)-min(SOCnums))}
rangeNmin <- function(x){(x-min(Nnums))/(max(Nnums)-min(Nnums))}
rangeTotP <- function(x){(x-min(TotP))/(max(TotP)-min(TotP))}
#SOCindex <- range01(SOCnums)
#Nindex <- range01(Nnums)
#Pindex <- range01(TotP)
#plot(SOCindex)
#plot(Nindex)
#plot(Pindex)
W.Index <- function(s,n,p,ws,wn,wp){
SOCindex <- rangeSOC(EnterYourSOCValue)
Nindex <- rangeNmin(EnterYourNminValue)
Pindex <- rangeTotP(EnterYourTotPValue)
windex <- (SOCindex*ws + Nindex*wn + Pindex*wp)/3
return(windex)
}
EnterYourSOCValue <- 1000 #in gC/dm3 - same as kg/m3
EnterYourNminValue <- 30 #in g/m2/yr for OA horizons
EnterYourTotPValue <- 10 #in mg P/kg
SOCWeight <- 1
NminWeight <- 0.5
TotPWeight <- 0.5
W.Index(EnterYourSOCValue,EnterYourNminValue,EnterYourTotPValue,SOCWeight,NminWeight,TotPWeight)
save(file="/Users/rzabramoff/Dropbox (Climate)/External Collaborations/ISCN/SoilIndex.Rdata")
save.image(file="/Users/rzabramoff/Dropbox (Climate)/External Collaborations/ISCN/SoilIndex.Rdata")
load(file="SoilIndex.Rdata")
hist(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)), xlim = c(0,100), breaks=100, xlab=expression("Nmin (g/m2/y O horizon)"))
hist(as.numeric(as.character(pf$Total.P)), xlim = c(0,2000), breaks=100, xlab=expression("Total P (mg/kg)"))
load(file="SoilIndex.Rdata")
EnterYourSOCValue <- 1000 #in gC/dm3 - same as kg/m3
EnterYourNminValue <- 30 #in g/m2/yr for OA horizons
EnterYourTotPValue <- 10 #in mg P/kg
SOCWeight <- 1
NminWeight <- 0.5
TotPWeight <- 0.5
W.Index(EnterYourSOCValue,EnterYourNminValue,EnterYourTotPValue,SOCWeight,NminWeight,TotPWeight)
summary(lay$orgc_value_avg)
hist(lay$orgc_value_avg, xlim = c(0,100), breaks=100, xlab=expression("SOC (gC/kg)"))
hist(lay$bdws_value_avg) #bulk density of whole soil kg/dm3
hist(lay$orgc_value_avg*lay$bdws_value_avg,  xlim = c(0,100), breaks=100, xlab=expression("SOC (gC/dm3)"), main="Soil Organic Carbon") #same as kg/m3
summary(lay$orgc_value_avg*lay$bdws_value_avg)
#possible index by quartiles: 0-2.6 low, 2.6-6 med, 6-14.9 good, 14.9-1250 high
#no land use type, but location and soil type
summary(df$cfao_soil_unit) #fao
summary(df$cfao_major_group)
summary(df$cstx_great_group) #soil tax
summary(df$cwrb_reference_soil_group) #world reference base
summary(df$cwrb_prefix_qualifier)
summary(df$cwrb_suffix_qualifier)
require(ggplot2)
lay$soc_estimate <- lay$orgc_value_avg*lay$bdws_value_avg
ggplot(lay, aes(soc_estimate)) +
geom_density()
#takes a while:
#ggplot(lay, aes(soc_estimate, fill=orgc_profile_code)) +
#  stat_density(position="stack")
summary(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)))
summary(as.numeric(as.character(nf$Nmin_g_m2_yr_A_mean)))
summary(as.numeric(as.character(nf$Nmin_g_m2_yr_OA_mean))) #g/m2/horizon
summary(pf$Total.P) #mg P/kg
hist(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)), xlim = c(0,100), breaks=100, xlab=expression("Nmin (g/m2/y O horizon)"))
hist(as.numeric(as.character(pf$Total.P)), xlim = c(0,2000), breaks=100, xlab=expression("Total P (mg/kg)"))
require(ggplot2)
ggplot(nf, aes(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)))) +
geom_density()
ggplot(pf, aes(pf$Total.P)) +
geom_density()
ggplot(nf, aes(NminNum, fill=LandUseType)) +
stat_density(position="stack") +
xlim(-10,60) +
xlab("N mineralization (g/m2/y) - OA horizon")
head(pf)
summary(pf$Resin.Pi)
hist(pf$Resin.Pi)
hist(pf$Total.P)
hist(pf)
summary(pf$Resin.Pi)
head(pf)
summary(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)))
summary(as.numeric(as.character(nf$Nmin_g_m2_yr_A_mean)))
summary(as.numeric(as.character(nf$Nmin_g_m2_yr_OA_mean))) #g/m2/horizon
summary(pf$Resin.Pi) #mg P/kg
hist(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)), xlim = c(0,100), breaks=100, xlab=expression("Nmin (g/m2/y O horizon)"))
hist(as.numeric(as.character(pf$Resin.Pi)), xlim = c(0,2000), breaks=100, xlab=expression("Resin P (mg/kg)"))
require(ggplot2)
ggplot(nf, aes(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)))) +
geom_density()
ggplot(pf, aes(pf$Resin.Pi)) +
geom_density()
ggplot(nf, aes(NminNum, fill=LandUseType)) +
stat_density(position="stack") +
xlim(-10,60) +
xlab("N mineralization (g/m2/y) - OA horizon")
load(file="SoilIndex.Rdata")
EnterYourSOCValue <- 1000 #in gC/dm3 - same as kg/m3
EnterYourNminValue <- 30 #in g/m2/yr for OA horizons
EnterYourResPValue <- 10 #in mg P/kg
SOCWeight <- 1
NminWeight <- 0.5
ResPWeight <- 0.5
W.Index(EnterYourSOCValue,EnterYourNminValue,EnterYourResPValue,SOCWeight,NminWeight,ResPWeight)
summary(lay$orgc_value_avg)
hist(lay$orgc_value_avg, xlim = c(0,100), breaks=100, xlab=expression("SOC (gC/kg)"))
hist(lay$bdws_value_avg) #bulk density of whole soil kg/dm3
hist(lay$orgc_value_avg*lay$bdws_value_avg,  xlim = c(0,100), breaks=100, xlab=expression("SOC (gC/dm3)"), main="Soil Organic Carbon") #same as kg/m3
summary(lay$orgc_value_avg*lay$bdws_value_avg)
#possible index by quartiles: 0-2.6 low, 2.6-6 med, 6-14.9 good, 14.9-1250 high
#no land use type, but location and soil type
summary(df$cfao_soil_unit) #fao
summary(df$cfao_major_group)
summary(df$cstx_great_group) #soil tax
summary(df$cwrb_reference_soil_group) #world reference base
summary(df$cwrb_prefix_qualifier)
summary(df$cwrb_suffix_qualifier)
require(ggplot2)
lay$soc_estimate <- lay$orgc_value_avg*lay$bdws_value_avg
ggplot(lay, aes(soc_estimate)) +
geom_density()
#takes a while:
#ggplot(lay, aes(soc_estimate, fill=orgc_profile_code)) +
#  stat_density(position="stack")
summary(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)))
summary(as.numeric(as.character(nf$Nmin_g_m2_yr_A_mean)))
summary(as.numeric(as.character(nf$Nmin_g_m2_yr_OA_mean))) #g/m2/horizon
summary(pf$Resin.Pi) #mg P/kg
hist(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)), xlim = c(0,100), breaks=100, xlab=expression("Nmin (g/m2/y O horizon)"))
hist(as.numeric(as.character(pf$Resin.Pi)), xlim = c(0,2000), breaks=100, xlab=expression("Resin P (mg/kg)"))
require(ggplot2)
ggplot(nf, aes(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)))) +
geom_density()
ggplot(pf, aes(pf$Resin.Pi)) +
geom_density()
ggplot(nf, aes(NminNum, fill=LandUseType)) +
stat_density(position="stack") +
xlim(-10,60) +
xlab("N mineralization (g/m2/y) - OA horizon")
SOCnums <- lay$orgc_value_avg*lay$bdws_value_avg
SOCnums <- SOCnums[!is.na(SOCnums)] #remove NAs
nf$NminNum <- as.numeric(as.character(nf$Nmin_g_m2_yr_OA_mean))
Nnums <- nf$NminNum[!is.na(nf$NminNum)] #remove NAs
Nnums <- Nnums[Nnums < 400 & Nnums > -200] #remove 2 outliers
ResP <- pf$Resin.Pi
range01 <- function(x){(x-min(x))/(max(x)-min(x))}
rangeSOC <- function(x){(x-min(SOCnums))/(max(SOCnums)-min(SOCnums))}
rangeNmin <- function(x){(x-min(Nnums))/(max(Nnums)-min(Nnums))}
rangeResP <- function(x){(x-min(ResP))/(max(ResP)-min(ResP))}
#SOCindex <- range01(SOCnums)
#Nindex <- range01(Nnums)
#Pindex <- range01(ResP)
#plot(SOCindex)
#plot(Nindex)
#plot(Pindex)
W.Index <- function(s,n,p,ws,wn,wp){
SOCindex <- rangeSOC(EnterYourSOCValue)
Nindex <- rangeNmin(EnterYourNminValue)
Pindex <- rangeResP(EnterYourResPValue)
windex <- (SOCindex*ws + Nindex*wn + Pindex*wp)/3
return(windex)
}
summary(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)))
summary(as.numeric(as.character(nf$Nmin_g_m2_yr_A_mean)))
summary(as.numeric(as.character(nf$Nmin_g_m2_yr_OA_mean))) #g/m2/horizon
summary(pf$Resin.Pi) #mg P/kg
hist(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)), xlim = c(0,100), breaks=100, xlab=expression("Nmin (g/m2/y O horizon)"))
hist(as.numeric(as.character(pf$Resin.Pi)), xlim = c(0,500), breaks=100, xlab=expression("Resin P (mg/kg)"))
require(ggplot2)
ggplot(nf, aes(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)))) +
geom_density()
ggplot(pf, aes(pf$Resin.Pi)) +
geom_density()
ggplot(nf, aes(NminNum, fill=LandUseType)) +
stat_density(position="stack") +
xlim(-10,60) +
xlab("N mineralization (g/m2/y) - OA horizon")
summary(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)))
summary(as.numeric(as.character(nf$Nmin_g_m2_yr_A_mean)))
summary(as.numeric(as.character(nf$Nmin_g_m2_yr_OA_mean))) #g/m2/horizon
summary(pf$Resin.Pi) #mg P/kg
hist(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)), xlim = c(0,100), breaks=100, xlab=expression("Nmin (g/m2/y O horizon)"))
hist(as.numeric(as.character(pf$Resin.Pi)), xlim = c(0,500), breaks=100, xlab=expression("Resin P (mg/kg)"))
require(ggplot2)
ggplot(nf, aes(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)))) +
geom_density()
ggplot(pf, aes(pf$Resin.Pi)) +
geom_density()
ggplot(nf, aes(NminNum, fill=LandUseType)) +
stat_density(position="stack") +
xlim(-10,60) +
xlab("N mineralization (g/m2/y) - OA horizon")
summary(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)))
summary(as.numeric(as.character(nf$Nmin_g_m2_yr_A_mean)))
summary(as.numeric(as.character(nf$Nmin_g_m2_yr_OA_mean))) #g/m2/horizon
summary(pf$Resin.Pi) #mg P/kg
hist(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)), xlim = c(0,100), breaks=100, xlab=expression("Nmin (g/m2/y O horizon)"))
hist(as.numeric(as.character(pf$Resin.Pi)), xlim = c(0,200), breaks=100, xlab=expression("Resin P (mg/kg)"))
require(ggplot2)
ggplot(nf, aes(as.numeric(as.character(nf$Nmin_g_m2_yr_O_mean)))) +
geom_density()
ggplot(pf, aes(pf$Resin.Pi)) +
geom_density()
ggplot(nf, aes(NminNum, fill=LandUseType)) +
stat_density(position="stack") +
xlim(-10,60) +
xlab("N mineralization (g/m2/y) - OA horizon")
